(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{25:function(e,t,o){},31:function(e,t,o){},32:function(e,t,o){"use strict";o.r(t);var s=o(0),n=o(1),a=o.n(n),c=o(18),r=o.n(c),i=o(5),l=o(6),h=o(7),u=o(9),d=o(8),b=o(2),j=o(11),f="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:k},O=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(j.a)(Object(j.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},v=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(j.a)(Object(j.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},m=(o(25),function(e){Object(u.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={book:{}},e.updateBookShelf=function(t){var o=e.state.book;o.shelf=t.target.value,e.setState({book:o}),e.props.updateBookShelf(e.props.book,t.target.value),O(o,t.target.value)},e}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.book.id,fetch("".concat(f,"/books/").concat(e),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.book}))).then((function(e){t.setState({book:e})}))}},{key:"render",value:function(){var e=this.state.book;return Object(s.jsx)("li",{children:Object(s.jsxs)("div",{className:"book",children:[Object(s.jsxs)("div",{className:"book-top",children:[e.imageLinks?Object(s.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}):Object(s.jsx)("div",{className:"book-cover",style:{width:128,height:193},children:"No thumbnail image available"}),Object(s.jsx)("div",{className:"book-shelf-changer",children:Object(s.jsxs)("select",{value:e.shelf,onChange:this.updateBookShelf,children:[Object(s.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(s.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(s.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(s.jsx)("option",{value:"read",children:"Read"}),Object(s.jsx)("option",{value:"none",children:"None"})]})})]}),Object(s.jsx)("div",{className:"book-title",children:e.title}),e.authors?e.authors.map((function(e){return Object(s.jsx)("div",{className:"book-authors",children:e},e)})):Object(s.jsx)("div",{className:"book-authors",children:e.publisher})]})})}}]),o}(a.a.Component)),x=function(e){var t=e.books,o=e.updateBookShelf;return Object(s.jsxs)("div",{className:"list-books",children:[Object(s.jsx)("div",{className:"list-books-title",children:Object(s.jsx)("h1",{children:"MyReads"})}),Object(s.jsx)("div",{className:"list-books-content",children:Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"bookshelf",children:[Object(s.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(s.jsx)("ol",{className:"books-grid",children:t.filter((function(e){return"currentlyReading"===e.shelf})).map((function(e){return Object(s.jsx)(m,{updateBookShelf:o,book:e},e.id)}))})]}),Object(s.jsxs)("div",{className:"bookshelf",children:[Object(s.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(s.jsx)("ol",{className:"books-grid",children:t.filter((function(e){return"wantToRead"===e.shelf})).map((function(e){return Object(s.jsx)(m,{updateBookShelf:o,book:e},e.id)}))})]}),Object(s.jsxs)("div",{className:"bookshelf",children:[Object(s.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(s.jsx)("ol",{className:"books-grid",children:t.filter((function(e){return"read"===e.shelf})).map((function(e){return Object(s.jsx)(m,{updateBookShelf:o,book:e},e.id)}))})]})]})}),Object(s.jsx)("div",{className:"open-search",children:Object(s.jsx)(i.b,{to:"/search",children:"Add a book"})})]})},g=function(e){Object(u.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={showingBooks:[],errMessage:""},e.updateQuery=function(t){""===t?e.setState({showingBooks:[]}):v(t).then((function(t){t.error?e.setState({showingBooks:[],errMessage:"No results found"}):e.setState({showingBooks:t,errMessage:""})}))},e}return Object(h.a)(o,[{key:"renderBooks",value:function(){var e=this;return""===this.state.query?this.setState({showingBooks:[]}):v(this.state.query).then((function(t){t.error?e.setState({showingBooks:[],errMessage:"No results found"}):e.setState({showingBooks:t,errMessage:""})}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"search-books",children:[Object(s.jsxs)("div",{className:"search-books-bar",children:[Object(s.jsx)(i.b,{to:"/",className:"close-search",children:"close"}),Object(s.jsx)("div",{className:"search-books-input-wrapper",children:Object(s.jsx)("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){return e.updateQuery(t.target.value)}})})]}),Object(s.jsx)("div",{className:"search-books-results",children:Object(s.jsxs)("ol",{className:"books-grid",children:[this.state.showingBooks.map((function(t){return Object(s.jsx)(m,{updateBookShelf:e.props.updateBookShelf,book:t},t.id)})),this.state.errMessage]})})]})}}]),o}(a.a.Component),y=function(e){Object(u.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={books:[]},e.updateBookShelf=function(t,o){var s=e.state.books,n=s.find((function(e){return e.id===t.id}));n?n.shelf=o:(t.shelf=o,s.push(t)),e.setState({books:s})},e}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(f,"/books"),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){e.setState({books:t})}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(b.a,{path:"/search",render:function(){return Object(s.jsx)(g,{updateBookShelf:e.updateBookShelf})}}),Object(s.jsx)(b.a,{exact:!0,path:"/",render:function(){return Object(s.jsx)(x,{books:e.state.books,updateBookShelf:e.updateBookShelf})}})]})}}]),o}(a.a.Component);o(31);r.a.render(Object(s.jsx)(i.a,{children:Object(s.jsx)(y,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.7935850e.chunk.js.map